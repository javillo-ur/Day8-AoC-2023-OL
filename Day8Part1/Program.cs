Console.WriteLine(new List<string[]>(){File.ReadAllLines("input.txt")}.Select(j => new{LR = j[0], rest = j[2..]}).Select(j => new{j.LR, nodes = j.rest.Select(line => new{start = line.Split(" ")[0], left = line.Split("(")[1].Split(",")[0], right = line.Split(")")[0].Split(",")[1].Trim()})}).Select(j => new{j.LR, nodes = j.nodes.Select(node => new{node.start, end = j.LR.Aggregate(node.start, (previous, current) => current == 'L' ? j.nodes.First(c => c.start == previous).left : j.nodes.First(c => c.start == previous).right)}).ToList()}).Select(j => Enumerable.Range(0, j.nodes.Count()).Aggregate(new Tuple<string,string>("", "AAA"), (previous, current) => previous.Item2 == "ZZZ" ? previous : new(previous.Item1 + j.LR, j.nodes.First(c => c.start == previous.Item2).end))).First().Item1.Length);